# library(haven)
library(tidyverse)
#devtools::install_github("Xuezhixing-Zhang/bayesmlogit")
library(bayesmlogit)
data <- readRDS("../mar_data_0607_sample1.rds") %>%
select(trans, age, male, nhblack,nhother,hispanic, nativity,hrscohort, c4reg2, c4reg3, c4reg4) %>%
filter(!is.na(trans)) %>%
filter(nativity == 0)
data <- as.data.frame(data)
out1 <- readRDS("../mar_sample1_out1.rds")
out2 <- readRDS("../mar_sample1_out2.rds")
trans <- rbind(out1$outwstepwidth,out2$outwstepwidth)
y <- data[,1]
X <- data[,-1]
mlifeTable(y,X,trans =trans,
groupby = c("male","nhblack","nhother","hispanic"),
# vars = c("educ1","educ2","nativity","hrscohort",
#          "srh2","srh3","srh4","srh5",
#          "c4reg2","c4reg3","c4reg4"),
# no_control = c("hrscohort",
#          "c4reg2","c4reg3","c4reg4"),
states=5,
startages=50,
age.gap=2,
nums = 1000,
file_path=".",
mlifeTable_plot = T,
cred = 0.84)
